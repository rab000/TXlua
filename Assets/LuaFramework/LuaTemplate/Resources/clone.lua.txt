--lua深拷贝
function clone( object )
    local lookup_table = {}
    local function copyObj( object )
		--非引用类型直接返回，lookup_table表中存在直接返回
        if type( object ) ~= "table" then
            return object
        elseif lookup_table[object] then
            return lookup_table[object]
        end

		--前面已经排除object不是table的情况，所以这里一定是table

        local new_table = {}
        lookup_table[object] = new_table
        for key, value in pairs( object ) do
            new_table[copyObj( key )] = copyObj( value )
        end

		--clone完毕的table继承原有table的元表
        return setmetatable( new_table, getmetatable( object ) )
    end
    return copyObj( object )
end